<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sanskrit HSC Complete - Chapters 3 & 4</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #FF6B35;
            --secondary: #4ECDC4;
            --accent: #95E1D3;
            --dark: #2C3E50;
            --light: #F8F9FA;
            --success: #52C41A;
            --warning: #FAAD14;
            --danger: #F5222D;
            --info: #1890FF;
        }

        body {
            font-family: 'Noto Sans Devanagari', 'Segoe UI', Tahoma, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--dark);
        }

        /* Header */
        .header {
            background: white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-pills {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .nav-pill {
            padding: 0.5rem 1.5rem;
            border-radius: 25px;
            background: var(--light);
            color: var(--dark);
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
            font-weight: 500;
        }

        .nav-pill:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .nav-pill.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        /* Main Container */
        .container {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        /* Chapter Sections */
        .chapter-section {
            display: none;
            animation: fadeIn 0.5s;
        }

        .chapter-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--light);
        }

        .card-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .card-title {
            font-size: 1.5rem;
            color: var(--dark);
        }

        /* Language Grid */
        .language-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .language-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 1.5rem;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .language-card:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .language-name {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--dark);
            margin-bottom: 0.5rem;
        }

        .language-word {
            font-size: 1rem;
            color: var(--primary);
        }

        /* Dialogue Box */
        .dialogue-box {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            padding: 1.5rem;
            margin: 1rem 0;
            position: relative;
        }

        .dialogue-speaker {
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .dialogue-text {
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--dark);
        }

        .dialogue-translation {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px dashed var(--secondary);
            color: #666;
            font-style: italic;
            display: none;
        }

        .dialogue-translation.show {
            display: block;
        }

        /* Etymology Section */
        .etymology-box {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-radius: 15px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .etymology-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin: 1rem 0;
            padding: 1rem;
            background: white;
            border-radius: 10px;
        }

        .etymology-arrow {
            color: var(--primary);
            font-size: 1.5rem;
        }

        /* Nirvachan Grid */
        .nirvachan-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .nirvachan-card {
            background: white;
            border: 2px solid var(--primary);
            border-radius: 15px;
            padding: 1.5rem;
            transition: all 0.3s;
        }

        .nirvachan-card:hover {
            background: linear-gradient(135deg, #fff 0%, #f0f0f0 100%);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .nirvachan-title {
            color: var(--primary);
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .nirvachan-example {
            color: #666;
            font-size: 0.9rem;
        }

        /* Interactive Quiz */
        .quiz-container {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .quiz-question {
            font-size: 1.3rem;
            font-weight: 500;
            color: var(--dark);
            margin-bottom: 2rem;
        }

        .quiz-options {
            display: grid;
            gap: 1rem;
        }

        .quiz-option {
            padding: 1rem;
            background: var(--light);
            border: 2px solid transparent;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quiz-option:hover {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-color: var(--primary);
        }

        .quiz-option.correct {
            background: #d4edda;
            border-color: var(--success);
        }

        .quiz-option.incorrect {
            background: #f8d7da;
            border-color: var(--danger);
        }

        /* Progress Bar */
        .progress-container {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .progress-bar {
            background: var(--light);
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-fill {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            height: 100%;
            transition: width 0.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        /* Flashcards */
        .flashcard-container {
            perspective: 1000px;
            margin: 2rem auto;
            max-width: 600px;
        }

        .flashcard {
            width: 100%;
            height: 300px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }

        .flashcard.flipped {
            transform: rotateY(180deg);
        }

        .flashcard-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 20px;
            padding: 2rem;
        }

        .flashcard-front {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .flashcard-back {
            background: white;
            color: var(--dark);
            transform: rotateY(180deg);
            border: 3px solid var(--primary);
        }

        .flashcard-content {
            text-align: center;
        }

        .flashcard-main {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .flashcard-sub {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        /* Bharatvidya Cards */
        .bharatvidya-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .vidya-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .vidya-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }

        .vidya-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1.5rem;
        }

        .vidya-body {
            padding: 1.5rem;
        }

        .vidya-list {
            list-style: none;
            padding: 0;
        }

        .vidya-list li {
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--light);
        }

        .vidya-list li:last-child {
            border-bottom: none;
        }

        /* Buttons */
        .btn {
            padding: 0.8rem 2rem;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .btn-secondary {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: white;
        }

        .btn-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin: 1rem 0;
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
            border-bottom: 2px dotted var(--primary);
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 250px;
            background-color: var(--dark);
            color: white;
            text-align: center;
            border-radius: 10px;
            padding: 1rem;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -125px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* Tables */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
        }

        .data-table th {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1rem;
            text-align: left;
        }

        .data-table td {
            padding: 1rem;
            border-bottom: 1px solid var(--light);
        }

        .data-table tr:hover {
            background: var(--light);
        }

        /* Achievements */
        .achievements {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
            margin: 2rem 0;
        }

        .achievement-badge {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s;
            cursor: pointer;
        }

        .achievement-badge:hover {
            transform: scale(1.1) rotate(5deg);
        }

        .achievement-badge.unlocked {
            background: linear-gradient(135deg, gold, orange);
            color: white;
        }

        .achievement-badge.locked {
            opacity: 0.5;
            filter: grayscale(100%);
        }

        .badge-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .badge-name {
            font-size: 0.7rem;
            text-align: center;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            animation: slideUp 0.3s;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-close {
            font-size: 2rem;
            cursor: pointer;
            color: #999;
            transition: color 0.3s;
        }

        .modal-close:hover {
            color: var(--danger);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .language-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
            
            .bharatvidya-grid {
                grid-template-columns: 1fr;
            }
            
            .nirvachan-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Loading */
        .loader {
            border: 5px solid var(--light);
            border-top: 5px solid var(--primary);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 2rem auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Special Effects */
        .glow {
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { box-shadow: 0 0 10px var(--primary); }
            to { box-shadow: 0 0 20px var(--primary), 0 0 30px var(--secondary); }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <span>🕉️</span>
                <span>संस्कृतम् HSC - Chapters 3 & 4</span>
            </div>
            <nav class="nav-pills">
                <div class="nav-pill active" onclick="showChapter('home')">Home</div>
                <div class="nav-pill" onclick="showChapter('chapter3')">Chapter 3: भाषासंवादः</div>
                <div class="nav-pill" onclick="showChapter('chapter4')">Chapter 4: भारतविद्या</div>
                <div class="nav-pill" onclick="showChapter('practice')">Practice</div>
                <div class="nav-pill" onclick="showChapter('tools')">Tools</div>
            </nav>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Home Section -->
        <section id="home" class="chapter-section active">
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">🎯</div>
                    <h2 class="card-title">Welcome to Advanced Sanskrit Learning!</h2>
                </div>
                <p style="font-size: 1.1rem; line-height: 1.8; margin-bottom: 1rem;">
                    This module covers Chapter 3 (भाषासंवादः - Language Dialogue) and Chapter 4 (भारतविद्या - Indian Studies). 
                    Perfect for HSC students with no prior Sanskrit knowledge!
                </p>
                
                <div class="progress-container">
                    <h3>Your Learning Progress</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%" id="mainProgress">0%</div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 2rem;">
                        <div style="background: var(--light); padding: 1rem; border-radius: 10px; text-align: center;">
                            <h4 style="color: var(--primary);">Chapter 3</h4>
                            <p style="font-size: 2rem; font-weight: bold;">0%</p>
                        </div>
                        <div style="background: var(--light); padding: 1rem; border-radius: 10px; text-align: center;">
                            <h4 style="color: var(--secondary);">Chapter 4</h4>
                            <p style="font-size: 2rem; font-weight: bold;">0%</p>
                        </div>
                        <div style="background: var(--light); padding: 1rem; border-radius: 10px; text-align: center;">
                            <h4 style="color: var(--info);">Practice Score</h4>
                            <p style="font-size: 2rem; font-weight: bold;">0/10</p>
                        </div>
                    </div>
                </div>

                <div class="achievements">
                    <div class="achievement-badge locked">
                        <div class="badge-icon">🌟</div>
                        <div class="badge-name">Beginner</div>
                    </div>
                    <div class="achievement-badge locked">
                        <div class="badge-icon">📚</div>
                        <div class="badge-name">Scholar</div>
                    </div>
                    <div class="achievement-badge locked">
                        <div class="badge-icon">🏆</div>
                        <div class="badge-name">Master</div>
                    </div>
                    <div class="achievement-badge locked">
                        <div class="badge-icon">👑</div>
                        <div class="badge-name">Expert</div>
                    </div>
                    <div class="achievement-badge locked">
                        <div class="badge-icon">🎓</div>
                        <div class="badge-name">Graduate</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Chapter 3: भाषासंवादः -->
        <section id="chapter3" class="chapter-section">
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">💬</div>
                    <h2 class="card-title">Chapter 3: भाषासंवादः - Language Dialogue</h2>
                </div>
                
                <p style="margin-bottom: 2rem;">
                    This chapter explores the fascinating connections between Sanskrit and other Indian languages, 
                    showing how they are all interconnected through common roots and etymology.
                </p>

                <!-- Bhramara Example -->
                <h3 style="color: var(--primary); margin: 2rem 0 1rem;">🐝 The Word "भ्रमरः" (Bee) Across Languages</h3>
                <div class="language-grid">
                    <div class="language-card" onclick="playWord('भुंगा')">
                        <div class="language-name">मराठी</div>
                        <div class="language-word">भुंगा</div>
                    </div>
                    <div class="language-card" onclick="playWord('भमरो')">
                        <div class="language-name">गुजराती</div>
                        <div class="language-word">भमरो</div>
                    </div>
                    <div class="language-card" onclick="playWord('भ्राम्मोर')">
                        <div class="language-name">बांग्ला</div>
                        <div class="language-word">भ्राम्मोर</div>
                    </div>
                    <div class="language-card" onclick="playWord('भरिंग')">
                        <div class="language-name">पंजाबी</div>
                        <div class="language-word">भरिंग</div>
                    </div>
                    <div class="language-card" onclick="playWord('बुमरो')">
                        <div class="language-name">काश्मीरी</div>
                        <div class="language-word">बुमरो</div>
                    </div>
                    <div class="language-card" onclick="playWord('भमरो')">
                        <div class="language-name">पालि</div>
                        <div class="language-word">भमरो</div>
                    </div>
                    <div class="language-card" onclick="playWord('भँवरा')">
                        <div class="language-name">हिन्दी</div>
                        <div class="language-word">भँवरा</div>
                    </div>
                    <div class="language-card" onclick="playWord('भोमोरा')">
                        <div class="language-name">असमिया</div>
                        <div class="language-word">भोमोरा</div>
                    </div>
                    <div class="language-card" onclick="playWord('भ्रमरमु')">
                        <div class="language-name">तेलुगु</div>
                        <div class="language-word">भ्रमरमु</div>
                    </div>
                    <div class="language-card" onclick="playWord('भअँर')">
                        <div class="language-name">उड़िया</div>
                        <div class="language-word">भअँर</div>
                    </div>
                </div>

                <!-- Etymology Explanation -->
                <div class="etymology-box">
                    <h3>📖 Etymology (निर्वचन)</h3>
                    <p style="margin-bottom: 1rem;">
                        The word भ्रमरः comes from the root भ्रम् (to wander/move around), 
                        as bees constantly move from flower to flower.
                    </p>
                    <div class="etymology-item">
                        <span>भ्रम्</span>
                        <span class="etymology-arrow">→</span>
                        <span>भ्रमति (wanders)</span>
                        <span class="etymology-arrow">→</span>
                        <span>भ्रमरः (bee)</span>
                    </div>
                </div>

                <!-- Saraswati's Dialogue -->
                <h3 style="color: var(--primary); margin: 2rem 0 1rem;">💬 Dialogue with Goddess Saraswati</h3>
                <div class="dialogue-box">
                    <div class="dialogue-speaker">भाषाः (Languages):</div>
                    <div class="dialogue-text">
                        "देवि, का नु अस्मासु श्रेष्ठा?" (O Goddess, which among us is the best?)
                    </div>
                    <button class="btn btn-secondary" onclick="toggleTranslation('trans1')">Show Translation</button>
                    <div class="dialogue-translation" id="trans1">
                        The languages ask: "O Goddess, which among us is the best?"
                    </div>
                </div>

                <div class="dialogue-box">
                    <div class="dialogue-speaker">सरस्वती:</div>
                    <div class="dialogue-text">
                        "आसेतुहिमाचलं भारते विराजमानाः यूयं सर्वाः भाषाः श्रेष्ठाः।"
                    </div>
                    <button class="btn btn-secondary" onclick="toggleTranslation('trans2')">Show Translation</button>
                    <div class="dialogue-translation" id="trans2">
                        Saraswati replies: "All of you languages residing in India from Setu (south) to Himalayas (north) are excellent."
                    </div>
                </div>

                <!-- निर्वचन सिद्धान्त -->
                <h3 style="color: var(--primary); margin: 2rem 0 1rem;">📚 Five Types of Etymology (पञ्चविध निर्वचन)</h3>
                <div class="nirvachan-grid">
                    <div class="nirvachan-card">
                        <div class="nirvachan-title">1. वर्णागमः</div>
                        <div class="nirvachan-example">Addition of letters<br>Example: द्वार (द् + वार)</div>
                    </div>
                    <div class="nirvachan-card">
                        <div class="nirvachan-title">2. वर्णविपर्ययः</div>
                        <div class="nirvachan-example">Letter reversal<br>Example: हिंस् → सिंह</div>
                    </div>
                    <div class="nirvachan-card">
                        <div class="nirvachan-title">3. वर्णविकारः</div>
                        <div class="nirvachan-example">Letter change<br>Example: यष्टि → लाठी</div>
                    </div>
                    <div class="nirvachan-card">
                        <div class="nirvachan-title">4. वर्णनाशः</div>
                        <div class="nirvachan-example">Letter deletion<br>Example: गम् + त्वा = गत्वा</div>
                    </div>
                    <div class="nirvachan-card">
                        <div class="nirvachan-title">5. धातोः अर्थातिशयेन योगः</div>
                        <div class="nirvachan-example">Semantic extension<br>Example: वह् → विवाह, प्रवाह, वाहन</div>
                    </div>
                </div>

                <!-- Animal Names from Amarakosha -->
                <h3 style="color: var(--primary); margin: 2rem 0 1rem;">🐾 Animal Names from अमरकोशः</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Sanskrit</th>
                            <th>English</th>
                            <th>Hindi</th>
                            <th>Special Note</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ओतुः</td>
                            <td>Cat</td>
                            <td>बिल्ली</td>
                            <td>Also called बिडाल, मार्जार</td>
                        </tr>
                        <tr>
                            <td>वृषदंशकः</td>
                            <td>Scorpion</td>
                            <td>बिच्छू</td>
                            <td>Also आखुभुक्</td>
                        </tr>
                        <tr>
                            <td>कौलेयकः</td>
                            <td>Dog (pup)</td>
                            <td>कुत्ता (पिल्ला)</td>
                            <td>Also सारमेयः</td>
                        </tr>
                        <tr>
                            <td>कुक्कुरः</td>
                            <td>Dog</td>
                            <td>कुत्ता</td>
                            <td>Also मृगदंशकः</td>
                        </tr>
                        <tr>
                            <td>श्वा</td>
                            <td>Dog</td>
                            <td>श्वान</td>
                            <td>Also शुनकः, भषकः</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Flashcards for Chapter 3 -->
            <div class="card">
                <h3 style="color: var(--primary); margin-bottom: 1rem;">🎴 Flashcards - Test Your Knowledge!</h3>
                <div class="flashcard-container">
                    <div class="flashcard" onclick="flipCard(this)">
                        <div class="flashcard-face flashcard-front">
                            <div class="flashcard-content">
                                <div class="flashcard-main">निर्वचन</div>
                                <div class="flashcard-sub">Click to reveal meaning</div>
                            </div>
                        </div>
                        <div class="flashcard-face flashcard-back">
                            <div class="flashcard-content">
                                <div class="flashcard-main">Etymology</div>
                                <div class="flashcard-sub">The study of word origins</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="btn-group" style="justify-content: center;">
                    <button class="btn btn-primary" onclick="nextFlashcard()">Next Card</button>
                    <button class="btn btn-secondary" onclick="shuffleFlashcards()">Shuffle</button>
                </div>
            </div>
        </section>

        <!-- Chapter 4: भारतविद्या -->
        <section id="chapter4" class="chapter-section">
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">🏛️</div>
                    <h2 class="card-title">Chapter 4: भारतविद्या - Indian Studies</h2>
                </div>
                
                <p style="margin-bottom: 2rem;">
                    Explore the various branches of Indology and ancient Indian knowledge systems.
                </p>

                <!-- Branches of Bharatvidya -->
                <h3 style="color: var(--primary); margin: 2rem 0 1rem;">📚 Branches of भारतविद्या</h3>
                <div class="bharatvidya-grid">
                    <div class="vidya-card">
                        <div class="vidya-header">
                            <h4>🪙 नाणकशास्त्रम् (Numismatics)</h4>
                        </div>
                        <div class="vidya-body">
                            <p>Study of ancient coins and currency</p>
                            <ul class="vidya-list">
                                <li>James Prinsep decoded Brahmi script in 1837</li>
                                <li>Shaka, Kshatrapa, Kushana coins</li>
                                <li>Gupta period called "Golden Age"</li>
                                <li>Dr. Shobhana Gokhale's contributions</li>
                            </ul>
                        </div>
                    </div>

                    <div class="vidya-card">
                        <div class="vidya-header">
                            <h4>🗿 प्रतिमाविद्या (Iconography)</h4>
                        </div>
                        <div class="vidya-body">
                            <p>Study of statues and divine images</p>
                            <ul class="vidya-list">
                                <li>Puranas describe image-making</li>
                                <li>आसन (posture), लाञ्छन (symbols)</li>
                                <li>मुद्रा (hand gestures), वाहन (vehicles)</li>
                                <li>N.P. Joshi's भारतीय मूर्तिशास्त्र</li>
                            </ul>
                        </div>
                    </div>

                    <div class="vidya-card">
                        <div class="vidya-header">
                            <h4>📜 हस्तलिखितशास्त्रम् (Manuscriptology)</h4>
                        </div>
                        <div class="vidya-body">
                            <p>Study of ancient manuscripts</p>
                            <ul class="vidya-list">
                                <li>Palm leaf (ताडपत्र) manuscripts</li>
                                <li>Birch bark (भूर्जपत्र) texts</li>
                                <li>Natural inks: नीली, कज्जल, हरिद्रा</li>
                                <li>Dr. R.S. Shivaganesha Murthy's work</li>
                            </ul>
                        </div>
                    </div>

                    <div class="vidya-card">
                        <div class="vidya-header">
                            <h4>🏛️ पुराभिलेखविद्या (Epigraphy)</h4>
                        </div>
                        <div class="vidya-body">
                            <p>Study of ancient inscriptions</p>
                            <ul class="vidya-list">
                                <li>Inscriptions on stones, copper plates</li>
                                <li>Royal edicts (राजाज्ञा)</li>
                                <li>Donation records (दानपत्र)</li>
                                <li>Brahmi, Kharoshthi scripts</li>
                            </ul>
                        </div>
                    </div>

                    <div class="vidya-card">
                        <div class="vidya-header">
                            <h4>⛏️ पुरातत्त्वशास्त्रम् (Archaeology)</h4>
                        </div>
                        <div class="vidya-body">
                            <p>Study of ancient civilizations through excavation</p>
                            <ul class="vidya-list">
                                <li>Excavation techniques</li>
                                <li>Dating of artifacts</li>
                                <li>Sindhu civilization discoveries</li>
                                <li>Dr. H.D. Sankalia's Maharashtra research</li>
                            </ul>
                        </div>
                    </div>

                    <div class="vidya-card">
                        <div class="vidya-header">
                            <h4>🏗️ स्थापत्यशास्त्रम् (Architecture)</h4>
                        </div>
                        <div class="vidya-body">
                            <p>Study of ancient buildings and structures</p>
                            <ul class="vidya-list">
                                <li>नागर, वेसर, द्रविड styles</li>
                                <li>Temple architecture</li>
                                <li>Cave temples (गुहामन्दिर)</li>
                                <li>Angkor Wat in Cambodia</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Important Terms -->
                <h3 style="color: var(--primary); margin: 2rem 0 1rem;">📖 Important Terms</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Sanskrit Term</th>
                            <th>English</th>
                            <th>Field</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>उत्खननम्</td>
                            <td>Excavation</td>
                            <td>Archaeology</td>
                        </tr>
                        <tr>
                            <td>कालमापनम्</td>
                            <td>Dating</td>
                            <td>Archaeology</td>
                        </tr>
                        <tr>
                            <td>ताम्रपट</td>
                            <td>Copper plate</td>
                            <td>Epigraphy</td>
                        </tr>
                        <tr>
                            <td>शिलालेख</td>
                            <td>Stone inscription</td>
                            <td>Epigraphy</td>
                        </tr>
                        <tr>
                            <td>मुद्रा</td>
                            <td>Coin/Seal</td>
                            <td>Numismatics</td>
                        </tr>
                        <tr>
                            <td>वास्तुकला</td>
                            <td>Architecture</td>
                            <td>Architecture</td>
                        </tr>
                    </tbody>
                </table>

                <!-- Raja's Duties -->
                <h3 style="color: var(--primary); margin: 2rem 0 1rem;">👑 राजकर्तव्यानि - Duties of a King</h3>
                <div class="card" style="background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);">
                    <h4>According to Kautilya's Arthashastra:</h4>
                    <ul style="line-height: 2;">
                        <li><strong>प्रजापालनम्</strong> - Protection of subjects</li>
                        <li><strong>कृषि-पशुपाल्य-वणिज्या च वार्ताः</strong> - Agriculture, animal husbandry, and trade</li>
                        <li><strong>सेतुबन्धन</strong> - Building bridges and dams</li>
                        <li><strong>वृक्षारोपण</strong> - Planting trees</li>
                        <li><strong>अभयवन</strong> - Wildlife sanctuaries</li>
                        <li><strong>उपहतान् पितेवानुगृह्णीयात्</strong> - Care for the afflicted like a father</li>
                        <li><strong>बाल-वृद्ध-व्यसनिनां रक्षा</strong> - Protection of children, elderly, and distressed</li>
                    </ul>
                </div>

                <!-- Natya Shastra Section -->
                <h3 style="color: var(--primary); margin: 2rem 0 1rem;">🎭 नाट्यशास्त्रम् - Theatre Science</h3>
                <div class="card">
                    <h4>Ten Types of Drama (दशरूपक)</h4>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Type</th>
                                <th>Acts</th>
                                <th>Hero</th>
                                <th>Theme</th>
                                <th>Example</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>नाटकम्</td>
                                <td>5-10</td>
                                <td>धीरोदात्त</td>
                                <td>Epic/Puranic</td>
                                <td>अभिज्ञानशाकुन्तलम्</td>
                            </tr>
                            <tr>
                                <td>प्रकरणम्</td>
                                <td>10</td>
                                <td>धीरप्रशान्त</td>
                                <td>Social</td>
                                <td>मृच्छकटिकम्</td>
                            </tr>
                            <tr>
                                <td>भाणः</td>
                                <td>1</td>
                                <td>विट</td>
                                <td>Imaginative</td>
                                <td>लीलामधुकरम्</td>
                            </tr>
                            <tr>
                                <td>प्रहसनम्</td>
                                <td>1</td>
                                <td>Common man</td>
                                <td>Comedy</td>
                                <td>कन्दर्पकेलिः</td>
                            </tr>
                            <tr>
                                <td>व्यायोगः</td>
                                <td>1</td>
                                <td>धीरोदात्त</td>
                                <td>Historical</td>
                                <td>सौगन्धिकाहरणम्</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4 style="margin-top: 2rem;">Eight Rasas (अष्ट रसाः)</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-top: 1rem;">
                        <div style="background: var(--light); padding: 1rem; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem;">💕</div>
                            <div>श्रृङ्गार</div>
                            <div style="font-size: 0.9rem; color: #666;">Love</div>
                        </div>
                        <div style="background: var(--light); padding: 1rem; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem;">😂</div>
                            <div>हास्य</div>
                            <div style="font-size: 0.9rem; color: #666;">Comedy</div>
                        </div>
                        <div style="background: var(--light); padding: 1rem; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem;">😢</div>
                            <div>करुण</div>
                            <div style="font-size: 0.9rem; color: #666;">Pathos</div>
                        </div>
                        <div style="background: var(--light); padding: 1rem; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem;">😠</div>
                            <div>रौद्र</div>
                            <div style="font-size: 0.9rem; color: #666;">Anger</div>
                        </div>
                        <div style="background: var(--light); padding: 1rem; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem;">💪</div>
                            <div>वीर</div>
                            <div style="font-size: 0.9rem; color: #666;">Heroic</div>
                        </div>
                        <div style="background: var(--light); padding: 1rem; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem;">😱</div>
                            <div>भयानक</div>
                            <div style="font-size: 0.9rem; color: #666;">Terror</div>
                        </div>
                        <div style="background: var(--light); padding: 1rem; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem;">🤢</div>
                            <div>बीभत्स</div>
                            <div style="font-size: 0.9rem; color: #666;">Disgust</div>
                        </div>
                        <div style="background: var(--light); padding: 1rem; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem;">😮</div>
                            <div>अद्भुत</div>
                            <div style="font-size: 0.9rem; color: #666;">Wonder</div>
                        </div>
                    </div>
                </div>

                <!-- Cosmetics Section -->
                <h3 style="color: var(--primary); margin: 2rem 0 1rem;">💄 प्रसाधनम् - Ancient Cosmetics</h3>
                <div class="card" style="background: linear-gradient(135deg, #fccb90 0%, #d57eeb 100%);">
                    <h4>Sixteen Aspects of Beauty (षोडश अङ्गानि)</h4>
                    <ol style="line-height: 2;">
                        <li>मर्दनम् - Massage</li>
                        <li>विलेपनम् - Application of paste</li>
                        <li>केशभूषा - Hair decoration</li>
                        <li>माल्यभूषा - Garland decoration</li>
                        <li>परिधेयम् - Clothing</li>
                        <li>गन्धयुक्तिः - Perfumes</li>
                        <li>अलङ्करणम् - Ornaments</li>
                        <li>स्नानम् - Bathing</li>
                        <li>दन्तधावनम् - Teeth cleaning</li>
                        <li>तिलकम् - Forehead mark</li>
                        <li>कज्जलम् - Eye liner</li>
                        <li>ताम्बूलम् - Betel leaf</li>
                        <li>नखरागः - Nail polish</li>
                        <li>कुङ्कुमम् - Saffron application</li>
                        <li>केशधूपनम् - Hair perfuming</li>
                        <li>पुष्पालङ्कारः - Flower decoration</li>
                    </ol>

                    <h4 style="margin-top: 2rem;">Natural Ingredients Used:</h4>
                    <ul style="line-height: 2;">
                        <li>🌿 ब्राह्मी, आमलक, भृङ्गराज - For hair</li>
                        <li>🌺 लोध्र पुष्प पराग - For face glow</li>
                        <li>🍃 हरिद्रा, चन्दन - For skin</li>
                        <li>🌸 अशोक, कर्णिकार, सिन्दुवार - For garlands</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Practice Section -->
        <section id="practice" class="chapter-section">
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">✍️</div>
                    <h2 class="card-title">Practice Exercises</h2>
                </div>

                <!-- Quiz for Chapter 3 -->
                <div class="quiz-container">
                    <h3>Chapter 3 Quiz: भाषासंवादः</h3>
                    <div class="quiz-question" id="ch3Question">
                        What is the Sanskrit word for "bee" that connects all Indian languages?
                    </div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkAnswer(this, 'correct')">भ्रमरः</div>
                        <div class="quiz-option" onclick="checkAnswer(this, 'wrong')">मधुकरः</div>
                        <div class="quiz-option" onclick="checkAnswer(this, 'wrong')">पुष्पकः</div>
                        <div class="quiz-option" onclick="checkAnswer(this, 'wrong')">वायुः</div>
                    </div>
                    <div class="btn-group" style="margin-top: 1rem;">
                        <button class="btn btn-primary" onclick="nextQuestion('ch3')">Next Question</button>
                    </div>
                </div>

                <!-- Quiz for Chapter 4 -->
                <div class="quiz-container" style="margin-top: 2rem;">
                    <h3>Chapter 4 Quiz: भारतविद्या</h3>
                    <div class="quiz-question" id="ch4Question">
                        Who decoded the Brahmi script in 1837?
                    </div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkAnswer(this, 'correct')">James Prinsep</div>
                        <div class="quiz-option" onclick="checkAnswer(this, 'wrong')">Max Mueller</div>
                        <div class="quiz-option" onclick="checkAnswer(this, 'wrong')">William Jones</div>
                        <div class="quiz-option" onclick="checkAnswer(this, 'wrong')">H.H. Wilson</div>
                    </div>
                    <div class="btn-group" style="margin-top: 1rem;">
                        <button class="btn btn-primary" onclick="nextQuestion('ch4')">Next Question</button>
                    </div>
                </div>

                <!-- Fill in the Blanks -->
                <div class="card" style="margin-top: 2rem;">
                    <h3>Fill in the Blanks</h3>
                    <ol style="line-height: 2.5;">
                        <li>
                            निर्वचन has _____ types (पञ्चविध).
                            <input type="text" style="margin-left: 1rem; padding: 0.5rem; border: 2px solid var(--primary); border-radius: 5px;">
                        </li>
                        <li>
                            The study of ancient coins is called _____.
                            <input type="text" style="margin-left: 1rem; padding: 0.5rem; border: 2px solid var(--primary); border-radius: 5px;">
                        </li>
                        <li>
                            भरतमुनि wrote the _____ शास्त्रम्.
                            <input type="text" style="margin-left: 1rem; padding: 0.5rem; border: 2px solid var(--primary); border-radius: 5px;">
                        </li>
                        <li>
                            There are _____ rasas in Sanskrit drama.
                            <input type="text" style="margin-left: 1rem; padding: 0.5rem; border: 2px solid var(--primary); border-radius: 5px;">
                        </li>
                    </ol>
                    <button class="btn btn-primary" style="margin-top: 1rem;" onclick="checkFillBlanks()">Check Answers</button>
                </div>

                <!-- Match the Following -->
                <div class="card" style="margin-top: 2rem;">
                    <h3>Match the Following</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                        <div>
                            <h4>Column A</h4>
                            <ol style="line-height: 2;">
                                <li>Numismatics</li>
                                <li>Epigraphy</li>
                                <li>Archaeology</li>
                                <li>Iconography</li>
                                <li>Manuscriptology</li>
                            </ol>
                        </div>
                        <div>
                            <h4>Column B</h4>
                            <ol style="line-height: 2;" type="A">
                                <li>प्रतिमाविद्या</li>
                                <li>हस्तलिखितशास्त्रम्</li>
                                <li>नाणकशास्त्रम्</li>
                                <li>पुरातत्त्वशास्त्रम्</li>
                                <li>पुराभिलेखविद्या</li>
                            </ol>
                        </div>
                    </div>
                    <button class="btn btn-primary" style="margin-top: 1rem;" onclick="showMatchAnswers()">Show Answers</button>
                </div>
            </div>
        </section>

        <!-- Tools Section -->
        <section id="tools" class="chapter-section">
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">🛠️</div>
                    <h2 class="card-title">Study Tools</h2>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
                    <div class="card" style="text-align: center; cursor: pointer;" onclick="openTool('dictionary')">
                        <div style="font-size: 3rem;">📖</div>
                        <h4>Dictionary</h4>
                        <p>Quick word lookup</p>
                    </div>
                    
                    <div class="card" style="text-align: center; cursor: pointer;" onclick="openTool('notes')">
                        <div style="font-size: 3rem;">📝</div>
                        <h4>My Notes</h4>
                        <p>Save your notes</p>
                    </div>
                    
                    <div class="card" style="text-align: center; cursor: pointer;" onclick="openTool('audio')">
                        <div style="font-size: 3rem;">🔊</div>
                        <h4>Pronunciation</h4>
                        <p>Audio guide</p>
                    </div>
                    
                    <div class="card" style="text-align: center; cursor: pointer;" onclick="openTool('exam')">
                        <div style="font-size: 3rem;">📋</div>
                        <h4>Exam Prep</h4>
                        <p>Practice papers</p>
                    </div>
                    
                    <div class="card" style="text-align: center; cursor: pointer;" onclick="openTool('progress')">
                        <div style="font-size: 3rem;">📊</div>
                        <h4>Progress</h4>
                        <p>Track learning</p>
                    </div>
                    
                    <div class="card" style="text-align: center; cursor: pointer;" onclick="openTool('games')">
                        <div style="font-size: 3rem;">🎮</div>
                        <h4>Games</h4>
                        <p>Learn with fun</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Modal -->
    <div class="modal" id="toolModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Tool Title</h2>
                <span class="modal-close" onclick="closeModal()">×</span>
            </div>
            <div id="modalBody">
                <!-- Content will be loaded here -->
            </div>
        </div>
    </div>

    <script>
        // Global Variables
        let currentChapter = 'home';
        let progress = {
            chapter3: 0,
            chapter4: 0,
            quizScore: 0,
            flashcardIndex: 0
        };

        // Flashcard Data
        const flashcards = [
            { front: 'निर्वचन', back: 'Etymology - Study of word origins' },
            { front: 'वर्णागमः', back: 'Addition of letters in word formation' },
            { front: 'नाणकशास्त्रम्', back: 'Numismatics - Study of coins' },
            { front: 'प्रतिमाविद्या', back: 'Iconography - Study of images' },
            { front: 'भ्रमरः', back: 'Bee - from भ्रम् (to wander)' },
            { front: 'अष्टरसाः', back: 'Eight emotions in drama' },
            { front: 'दशरूपकम्', back: 'Ten types of Sanskrit drama' },
            { front: 'षोडशकलाः', back: 'Sixteen arts of beauty' }
        ];

        // Chapter 3 Quiz Questions
        const ch3Questions = [
            {
                question: "What is the Sanskrit word for 'bee' that connects all Indian languages?",
                options: ["भ्रमरः", "मधुकरः", "पुष्पकः", "वायुः"],
                correct: 0
            },
            {
                question: "How many types of निर्वचन are there?",
                options: ["Three", "Five", "Seven", "Nine"],
                correct: 1
            },
            {
                question: "Who is the goddess of language?",
                options: ["लक्ष्मी", "पार्वती", "सरस्वती", "दुर्गा"],
                correct: 2
            },
            {
                question: "What does वर्णविपर्ययः mean?",
                options: ["Letter addition", "Letter reversal", "Letter deletion", "Letter change"],
                correct: 1
            },
            {
                question: "Which text contains animal names vocabulary?",
                options: ["वेद", "अमरकोश", "रामायण", "महाभारत"],
                correct: 1
            }
        ];

        // Chapter 4 Quiz Questions
        const ch4Questions = [
            {
                question: "Who decoded the Brahmi script in 1837?",
                options: ["James Prinsep", "Max Mueller", "William Jones", "H.H. Wilson"],
                correct: 0
            },
            {
                question: "What is the study of ancient coins called?",
                options: ["Iconography", "Numismatics", "Epigraphy", "Archaeology"],
                correct: 1
            },
            {
                question: "How many rasas are there in Sanskrit drama?",
                options: ["Six", "Seven", "Eight", "Nine"],
                correct: 2
            },
            {
                question: "Who wrote the Natyashastra?",
                options: ["कालिदास", "भरतमुनि", "भास", "भवभूति"],
                correct: 1
            },
            {
                question: "What period is called the 'Golden Age'?",
                options: ["Maurya", "Gupta", "Kushana", "Shaka"],
                correct: 1
            }
        ];

        let currentQuestionIndex = {
            ch3: 0,
            ch4: 0
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadProgress();
            updateProgressBars();
        });

        // Show Chapter
        function showChapter(chapterId) {
            document.querySelectorAll('.chapter-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(chapterId).classList.add('active');
            
            document.querySelectorAll('.nav-pill').forEach(pill => {
                pill.classList.remove('active');
            });
            event.target.classList.add('active');
            
            currentChapter = chapterId;
            saveProgress();
        }

        // Toggle Translation
        function toggleTranslation(id) {
            const element = document.getElementById(id);
            element.classList.toggle('show');
            const button = element.previousElementSibling;
            button.textContent = element.classList.contains('show') ? 'Hide Translation' : 'Show Translation';
        }

        // Play Word (Simulated)
        function playWord(word) {
            const utterance = new SpeechSynthesisUtterance(word);
            utterance.lang = 'hi-IN';
            utterance.rate = 0.8;
            speechSynthesis.speak(utterance);
            
            // Visual feedback
            event.target.style.transform = 'scale(0.95)';
            setTimeout(() => {
                event.target.style.transform = '';
            }, 200);
        }

        // Flashcard Functions
        function flipCard(card) {
            card.classList.toggle('flipped');
        }

        function nextFlashcard() {
            progress.flashcardIndex = (progress.flashcardIndex + 1) % flashcards.length;
            updateFlashcard();
        }

        function shuffleFlashcards() {
            progress.flashcardIndex = Math.floor(Math.random() * flashcards.length);
            updateFlashcard();
        }

        function updateFlashcard() {
            const card = flashcards[progress.flashcardIndex];
            const flashcard = document.querySelector('.flashcard');
            if (flashcard) {
                flashcard.classList.remove('flipped');
                setTimeout(() => {
                    flashcard.querySelector('.flashcard-front .flashcard-main').textContent = card.front;
                    flashcard.querySelector('.flashcard-back .flashcard-main').textContent = card.back.split(' - ')[0];
                    flashcard.querySelector('.flashcard-back .flashcard-sub').textContent = card.back.split(' - ')[1] || '';
                }, 300);
            }
        }

        // Quiz Functions
        function checkAnswer(element, result) {
            document.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('correct', 'incorrect');
            });
            
            if (result === 'correct') {
                element.classList.add('correct');
                progress.quizScore++;
                updateProgress();
            } else {
                element.classList.add('incorrect');
            }
        }

        function nextQuestion(chapter) {
            const questions = chapter === 'ch3' ? ch3Questions : ch4Questions;
            currentQuestionIndex[chapter] = (currentQuestionIndex[chapter] + 1) % questions.length;
            
            const question = questions[currentQuestionIndex[chapter]];
            const questionElement = document.getElementById(chapter + 'Question');
            questionElement.textContent = question.question;
            
            const optionsContainer = questionElement.nextElementSibling;
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'quiz-option';
                optionDiv.textContent = option;
                optionDiv.onclick = () => checkAnswer(optionDiv, index === question.correct ? 'correct' : 'wrong');
                optionsContainer.appendChild(optionDiv);
            });
        }

        // Check Fill in the Blanks
        function checkFillBlanks() {
            const answers = ['five', 'Numismatics', 'Natya', 'eight'];
            const inputs = document.querySelectorAll('input[type="text"]');
            let correct = 0;
            
            inputs.forEach((input, index) => {
                if (input.value.toLowerCase().includes(answers[index].toLowerCase())) {
                    input.style.borderColor = 'green';
                    correct++;
                } else {
                    input.style.borderColor = 'red';
                }
            });
            
            alert(`You got ${correct} out of ${answers.length} correct!`);
        }

        // Show Match Answers
        function showMatchAnswers() {
            alert('Answers:\n1-C (नाणकशास्त्रम्)\n2-E (पुराभिलेखविद्या)\n3-D (पुरातत्त्वशास्त्रम्)\n4-A (प्रतिमाविद्या)\n5-B (हस्तलिखितशास्त्रम्)');
        }

        // Open Tool Modal
        function openTool(tool) {
            const modal = document.getElementById('toolModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            
            switch(tool) {
                case 'dictionary':
                    modalTitle.textContent = '📖 Sanskrit Dictionary';
                    modalBody.innerHTML = `
                        <input type="text" placeholder="Search word..." style="width: 100%; padding: 1rem; border: 2px solid var(--primary); border-radius: 10px; margin-bottom: 1rem;">
                        <div style="max-height: 400px; overflow-y: auto;">
                            <div style="padding: 1rem; background: var(--light); border-radius: 10px; margin-bottom: 0.5rem;">
                                <strong>निर्वचन</strong> - Etymology, word derivation
                            </div>
                            <div style="padding: 1rem; background: var(--light); border-radius: 10px; margin-bottom: 0.5rem;">
                                <strong>भ्रमरः</strong> - Bee (from भ्रम् - to wander)
                            </div>
                            <div style="padding: 1rem; background: var(--light); border-radius: 10px;">
                                <strong>प्रतिमा</strong> - Image, statue, idol
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'notes':
                    modalTitle.textContent = '📝 My Notes';
                    modalBody.innerHTML = `
                        <textarea placeholder="Write your notes here..." style="width: 100%; height: 200px; padding: 1rem; border: 2px solid var(--primary); border-radius: 10px;"></textarea>
                        <button class="btn btn-primary" style="margin-top: 1rem;">Save Notes</button>
                    `;
                    break;
                    
                case 'progress':
                    modalTitle.textContent = '📊 Your Progress';
                    modalBody.innerHTML = `
                        <div style="text-align: center;">
                            <h3>Overall Progress</h3>
                            <div class="progress-bar" style="margin: 2rem 0;">
                                <div class="progress-fill" style="width: ${(progress.chapter3 + progress.chapter4) / 2}%">
                                    ${Math.round((progress.chapter3 + progress.chapter4) / 2)}%
                                </div>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 2rem;">
                                <div>
                                    <h4>Chapter 3</h4>
                                    <p style="font-size: 2rem; color: var(--primary);">${progress.chapter3}%</p>
                                </div>
                                <div>
                                    <h4>Chapter 4</h4>
                                    <p style="font-size: 2rem; color: var(--secondary);">${progress.chapter4}%</p>
                                </div>
                            </div>
                            <div style="margin-top: 2rem;">
                                <h4>Quiz Score</h4>
                                <p style="font-size: 2rem; color: var(--success);">${progress.quizScore}/10</p>
                            </div>
                        </div>
                    `;
                    break;
                    
                default:
                    modalTitle.textContent = 'Tool';
                    modalBody.innerHTML = '<p>This tool is coming soon!</p>';
            }
            
            modal.classList.add('show');
        }

        // Close Modal
        function closeModal() {
            document.getElementById('toolModal').classList.remove('show');
        }

        // Update Progress
        function updateProgress() {
            // Simple progress calculation
            if (currentChapter === 'chapter3') {
                progress.chapter3 = Math.min(100, progress.chapter3 + 10);
            } else if (currentChapter === 'chapter4') {
                progress.chapter4 = Math.min(100, progress.chapter4 + 10);
            }
            
            updateProgressBars();
            saveProgress();
            checkAchievements();
        }

        // Update Progress Bars
        function updateProgressBars() {
            const mainProgress = (progress.chapter3 + progress.chapter4) / 2;
            const mainProgressBar = document.getElementById('mainProgress');
            if (mainProgressBar) {
                mainProgressBar.style.width = mainProgress + '%';
                mainProgressBar.textContent = Math.round(mainProgress) + '%';
            }
        }

        // Check Achievements
        function checkAchievements() {
            const badges = document.querySelectorAll('.achievement-badge');
            const totalProgress = (progress.chapter3 + progress.chapter4) / 2;
            
            if (totalProgress >= 20 && badges[0]) badges[0].classList.remove('locked');
            if (totalProgress >= 40 && badges[1]) badges[1].classList.remove('locked');
            if (totalProgress >= 60 && badges[2]) badges[2].classList.remove('locked');
            if (totalProgress >= 80 && badges[3]) badges[3].classList.remove('locked');
            if (totalProgress >= 100 && badges[4]) {
                badges[4].classList.remove('locked');
                badges[4].classList.add('unlocked', 'glow');
            }
        }

        // Save Progress
        function saveProgress() {
            localStorage.setItem('sanskritProgress34', JSON.stringify(progress));
        }

        // Load Progress
        function loadProgress() {
            const saved = localStorage.getItem('sanskritProgress34');
            if (saved) {
                progress = JSON.parse(saved);
            }
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('toolModal');
            if (event.target === modal) {
                modal.classList.remove('show');
            }
        }
    </script>
</body>
</html>